// Asset loading system for building images and colonist sprites
import BuildingHouseImg from './BuildingHouse.png';
import WheatStage1Img from './farm/wheat_stage_one.png';
import WheatStage2Img from './farm/wheat_stage_two.png';
import WheatStage3Img from './farm/wheat_stage_three.png';

// Colonist sprite imports
// Heads
import MaleAverageNormalEast from './things/colonist/human-like/heads/Male_Average_Normal_east.png';
import MaleAverageNormalNorth from './things/colonist/human-like/heads/Male_Average_Normal_north.png';
import MaleAverageNormalSouth from './things/colonist/human-like/heads/Male_Average_Normal_south.png';

// Bodies
import NakedMaleEast from './things/colonist/human-like/bodies/Naked_Male_east.png';
import NakedMaleNorth from './things/colonist/human-like/bodies/Naked_Male_north.png';
import NakedMaleSouth from './things/colonist/human-like/bodies/Naked_Male_south.png';

// Hair styles
import AfroEast from './things/colonist/human-like/hair/Afro_east.png';
import AfroNorth from './things/colonist/human-like/hair/Afro_north.png';
import AfroSouth from './things/colonist/human-like/hair/Afro_south.png';
import BobEast from './things/colonist/human-like/hair/Bob_east.png';
import BobNorth from './things/colonist/human-like/hair/Bob_north.png';
import BobSouth from './things/colonist/human-like/hair/Bob_south.png';
import BowlcutEast from './things/colonist/human-like/hair/Bowlcut_east.png';
import BowlcutNorth from './things/colonist/human-like/hair/Bowlcut_north.png';
import BowlcutSouth from './things/colonist/human-like/hair/Bowlcut_south.png';
import BraidbunEast from './things/colonist/human-like/hair/Braidbun_east.png';
import BraidbunNorth from './things/colonist/human-like/hair/Braidbun_north.png';
import BraidbunSouth from './things/colonist/human-like/hair/Braidbun_south.png';
import BravoEast from './things/colonist/human-like/hair/Bravo_east.png';
import BravoNorth from './things/colonist/human-like/hair/Bravo_north.png';
import BravoSouth from './things/colonist/human-like/hair/Bravo_south.png';
import BurgundyEast from './things/colonist/human-like/hair/Burgundy_east.png';
import BurgundyNorth from './things/colonist/human-like/hair/Burgundy_north.png';
import BurgundySouth from './things/colonist/human-like/hair/Burgundy_south.png';
import CleopatraEast from './things/colonist/human-like/hair/Cleopatra_east.png';
import CleopatraNorth from './things/colonist/human-like/hair/Cleopatra_north.png';
import CleopatraSouth from './things/colonist/human-like/hair/Cleopatra_south.png';
import CurlyEast from './things/colonist/human-like/hair/Curly_east.png';
import CurlyNorth from './things/colonist/human-like/hair/Curly_north.png';
import CurlySouth from './things/colonist/human-like/hair/Curly_south.png';
import CuteEast from './things/colonist/human-like/hair/Cute_east.png';
import CuteNorth from './things/colonist/human-like/hair/Cute_north.png';
import CuteSouth from './things/colonist/human-like/hair/Cute_south.png';
import DecentEast from './things/colonist/human-like/hair/Decent_east.png';
import DecentNorth from './things/colonist/human-like/hair/Decent_north.png';
import DecentSouth from './things/colonist/human-like/hair/Decent_south.png';
import ElderEast from './things/colonist/human-like/hair/Elder_east.png';
import ElderNorth from './things/colonist/human-like/hair/Elder_north.png';
import ElderSouth from './things/colonist/human-like/hair/Elder_south.png';
import FancybunEast from './things/colonist/human-like/hair/Fancybun_east.png';
import FancybunNorth from './things/colonist/human-like/hair/Fancybun_north.png';
import FancybunSouth from './things/colonist/human-like/hair/Fancybun_south.png';
import FirestarterEast from './things/colonist/human-like/hair/Firestarter_east.png';
import FirestarterNorth from './things/colonist/human-like/hair/Firestarter_north.png';
import FirestarterSouth from './things/colonist/human-like/hair/Firestarter_south.png';
import FlowyEast from './things/colonist/human-like/hair/Flowy_east.png';
import FlowyNorth from './things/colonist/human-like/hair/Flowy_north.png';
import FlowySouth from './things/colonist/human-like/hair/Flowy_south.png';
import FringeEast from './things/colonist/human-like/hair/Fringe_east.png';
import FringeNorth from './things/colonist/human-like/hair/Fringe_north.png';
import FringeSouth from './things/colonist/human-like/hair/Fringe_south.png';
import FrozenEast from './things/colonist/human-like/hair/Frozen_east.png';
import FrozenNorth from './things/colonist/human-like/hair/Frozen_north.png';
import FrozenSouth from './things/colonist/human-like/hair/Frozen_south.png';
import GastonEast from './things/colonist/human-like/hair/Gaston_east.png';
import GastonNorth from './things/colonist/human-like/hair/Gaston_north.png';
import GastonSouth from './things/colonist/human-like/hair/Gaston_south.png';
import GreasySwoopEast from './things/colonist/human-like/hair/GreasySwoop_east.png';
import GreasySwoopNorth from './things/colonist/human-like/hair/GreasySwoop_north.png';
import GreasySwoopSouth from './things/colonist/human-like/hair/GreasySwoop_south.png';
import JunkieEast from './things/colonist/human-like/hair/Junkie_east.png';
import JunkieNorth from './things/colonist/human-like/hair/Junkie_north.png';
import JunkieSouth from './things/colonist/human-like/hair/Junkie_south.png';
import KeeperEast from './things/colonist/human-like/hair/Keeper_east.png';
import KeeperNorth from './things/colonist/human-like/hair/Keeper_north.png';
import KeeperSouth from './things/colonist/human-like/hair/Keeper_south.png';
import LacklandEast from './things/colonist/human-like/hair/Lackland_east.png';
import LacklandNorth from './things/colonist/human-like/hair/Lackland_north.png';
import LacklandSouth from './things/colonist/human-like/hair/Lackland_south.png';
import LocksEast from './things/colonist/human-like/hair/Locks_east.png';
import LocksNorth from './things/colonist/human-like/hair/Locks_north.png';
import LocksSouth from './things/colonist/human-like/hair/Locks_south.png';
import LongEast from './things/colonist/human-like/hair/Long_east.png';
import LongNorth from './things/colonist/human-like/hair/Long_north.png';
import LongSouth from './things/colonist/human-like/hair/Long_south.png';
import MessEast from './things/colonist/human-like/hair/Mess_east.png';
import MessNorth from './things/colonist/human-like/hair/Mess_north.png';
import MessSouth from './things/colonist/human-like/hair/Mess_south.png';
import MohawkEast from './things/colonist/human-like/hair/Mohawk_east.png';
import MohawkNorth from './things/colonist/human-like/hair/Mohawk_north.png';
import MohawkSouth from './things/colonist/human-like/hair/Mohawk_south.png';
import MopEast from './things/colonist/human-like/hair/Mop_east.png';
import MopNorth from './things/colonist/human-like/hair/Mop_north.png';
import MopSouth from './things/colonist/human-like/hair/Mop_south.png';
import PigtailsEast from './things/colonist/human-like/hair/Pigtails_east.png';
import PigtailsNorth from './things/colonist/human-like/hair/Pigtails_north.png';
import PigtailsSouth from './things/colonist/human-like/hair/Pigtails_south.png';
import PonytailsEast from './things/colonist/human-like/hair/Ponytails_east.png';
import PonytailsNorth from './things/colonist/human-like/hair/Ponytails_north.png';
import PonytailsSouth from './things/colonist/human-like/hair/Ponytails_south.png';
import PrimalEast from './things/colonist/human-like/hair/Primal_east.png';
import PrimalNorth from './things/colonist/human-like/hair/Primal_north.png';
import PrimalSouth from './things/colonist/human-like/hair/Primal_south.png';
import PrincessEast from './things/colonist/human-like/hair/Princess_east.png';
import PrincessNorth from './things/colonist/human-like/hair/Princess_north.png';
import PrincessSouth from './things/colonist/human-like/hair/Princess_south.png';
import RandyEast from './things/colonist/human-like/hair/Randy_east.png';
import RandyNorth from './things/colonist/human-like/hair/Randy_north.png';
import RandySouth from './things/colonist/human-like/hair/Randy_south.png';
import RecruitEast from './things/colonist/human-like/hair/Recruit_east.png';
import RecruitNorth from './things/colonist/human-like/hair/Recruit_north.png';
import RecruitSouth from './things/colonist/human-like/hair/Recruit_south.png';
import RevoltEast from './things/colonist/human-like/hair/Revolt_east.png';
import RevoltNorth from './things/colonist/human-like/hair/Revolt_north.png';
import RevoltSouth from './things/colonist/human-like/hair/Revolt_south.png';
import RockstarEast from './things/colonist/human-like/hair/Rockstar_east.png';
import RockstarNorth from './things/colonist/human-like/hair/Rockstar_north.png';
import RockstarSouth from './things/colonist/human-like/hair/Rockstar_south.png';
import RookieEast from './things/colonist/human-like/hair/Rookie_east.png';
import RookieNorth from './things/colonist/human-like/hair/Rookie_north.png';
import RookieSouth from './things/colonist/human-like/hair/Rookie_south.png';
import SavageEast from './things/colonist/human-like/hair/Savage_east.png';
import SavageNorth from './things/colonist/human-like/hair/Savage_north.png';
import SavageSouth from './things/colonist/human-like/hair/Savage_south.png';
import ScatEast from './things/colonist/human-like/hair/Scat_east.png';
import ScatNorth from './things/colonist/human-like/hair/Scat_north.png';
import ScatSouth from './things/colonist/human-like/hair/Scat_south.png';
import ScorpiontailEast from './things/colonist/human-like/hair/Scorpiontail_east.png';
import ScorpiontailNorth from './things/colonist/human-like/hair/Scorpiontail_north.png';
import ScorpiontailSouth from './things/colonist/human-like/hair/Scorpiontail_south.png';
import ScrapperEast from './things/colonist/human-like/hair/Scrapper_east.png';
import ScrapperNorth from './things/colonist/human-like/hair/Scrapper_north.png';
import ScrapperSouth from './things/colonist/human-like/hair/Scrapper_south.png';
import SenoritaEast from './things/colonist/human-like/hair/Senorita_east.png';
import SenoritaNorth from './things/colonist/human-like/hair/Senorita_north.png';
import SenoritaSouth from './things/colonist/human-like/hair/Senorita_south.png';
import ShavedEast from './things/colonist/human-like/hair/Shaved_east.png';
import ShavedNorth from './things/colonist/human-like/hair/Shaved_north.png';
import ShavedSouth from './things/colonist/human-like/hair/Shaved_south.png';
import ShaveTopBraidEast from './things/colonist/human-like/hair/ShaveTopBraid_east.png';
import ShaveTopBraidNorth from './things/colonist/human-like/hair/ShaveTopBraid_north.png';
import ShaveTopBraidSouth from './things/colonist/human-like/hair/ShaveTopBraid_south.png';
import SnazzyEast from './things/colonist/human-like/hair/Snazzy_east.png';
import SnazzyNorth from './things/colonist/human-like/hair/Snazzy_north.png';
import SnazzySouth from './things/colonist/human-like/hair/Snazzy_south.png';
import SpikesEast from './things/colonist/human-like/hair/Spikes_east.png';
import SpikesNorth from './things/colonist/human-like/hair/Spikes_north.png';
import SpikesSouth from './things/colonist/human-like/hair/Spikes_south.png';
import StickyEast from './things/colonist/human-like/hair/Sticky_east.png';
import StickyNorth from './things/colonist/human-like/hair/Sticky_north.png';
import StickySouth from './things/colonist/human-like/hair/Sticky_south.png';
import TopdogEast from './things/colonist/human-like/hair/Topdog_east.png';
import TopdogNorth from './things/colonist/human-like/hair/Topdog_north.png';
import TopdogSouth from './things/colonist/human-like/hair/Topdog_south.png';
import TroubadourEast from './things/colonist/human-like/hair/Troubadour_east.png';
import TroubadourNorth from './things/colonist/human-like/hair/Troubadour_north.png';
import TroubadourSouth from './things/colonist/human-like/hair/Troubadour_south.png';
import TuftEast from './things/colonist/human-like/hair/Tuft_east.png';
import TuftNorth from './things/colonist/human-like/hair/Tuft_north.png';
import TuftSouth from './things/colonist/human-like/hair/Tuft_south.png';
import WardenEast from './things/colonist/human-like/hair/Warden_east.png';
import WardenNorth from './things/colonist/human-like/hair/Warden_north.png';
import WardenSouth from './things/colonist/human-like/hair/Warden_south.png';
import WavyEast from './things/colonist/human-like/hair/Wavy_east.png';
import WavyNorth from './things/colonist/human-like/hair/Wavy_north.png';
import WavySouth from './things/colonist/human-like/hair/Wavy_south.png';

// Apparel
import ShirtBasicMaleEast from './things/colonist/human-like/apperal/ShirtBasic/ShirtBasic_Male_east.png';
import ShirtBasicMaleNorth from './things/colonist/human-like/apperal/ShirtBasic/ShirtBasic_Male_north.png';
import ShirtBasicMaleSouth from './things/colonist/human-like/apperal/ShirtBasic/ShirtBasic_Male_south.png';

// Weapons - Ranged
import AssaultRifle from './things/item/equipment/weapon-ranged/AssaultRifle.png';
import Autopistol from './things/item/equipment/weapon-ranged/Autopistol.png';
import Revolver from './things/item/equipment/weapon-ranged/Revolver.png';
import Shotgun from './things/item/equipment/weapon-ranged/Shotgun.png';
import SniperRifle from './things/item/equipment/weapon-ranged/SniperRifle.png';

// Weapons - Melee
import Club from './things/item/equipment/weapon-melee/Club.png';
import Knife from './things/item/equipment/weapon-melee/Knife.png';

export class ImageAssets {
  private static instance: ImageAssets;
  private images: Map<string, HTMLImageElement> = new Map();
  private loaded: boolean = false;

  static getInstance(): ImageAssets {
    if (!ImageAssets.instance) {
      ImageAssets.instance = new ImageAssets();
    }
    return ImageAssets.instance;
  }

  async loadAssets(onProgress?: (info: { loaded: number; total: number; name: string; status: 'loaded' | 'failed' }) => void): Promise<void> {
    const buildingAssets = [
      { name: 'house', path: BuildingHouseImg },
      { name: 'wheat_stage_1', path: WheatStage1Img },
      { name: 'wheat_stage_2', path: WheatStage2Img },
      { name: 'wheat_stage_3', path: WheatStage3Img }
    ];

    const colonistAssets = [
      // Heads
      { name: 'head_male_average_normal_east', path: MaleAverageNormalEast },
      { name: 'head_male_average_normal_north', path: MaleAverageNormalNorth },
      { name: 'head_male_average_normal_south', path: MaleAverageNormalSouth },
      
      // Bodies
      { name: 'body_naked_male_east', path: NakedMaleEast },
      { name: 'body_naked_male_north', path: NakedMaleNorth },
      { name: 'body_naked_male_south', path: NakedMaleSouth },
      
      // Hair styles
      { name: 'hair_afro_east', path: AfroEast },
      { name: 'hair_afro_north', path: AfroNorth },
      { name: 'hair_afro_south', path: AfroSouth },
      { name: 'hair_bob_east', path: BobEast },
      { name: 'hair_bob_north', path: BobNorth },
      { name: 'hair_bob_south', path: BobSouth },
      { name: 'hair_bowlcut_east', path: BowlcutEast },
      { name: 'hair_bowlcut_north', path: BowlcutNorth },
      { name: 'hair_bowlcut_south', path: BowlcutSouth },
      { name: 'hair_braidbun_east', path: BraidbunEast },
      { name: 'hair_braidbun_north', path: BraidbunNorth },
      { name: 'hair_braidbun_south', path: BraidbunSouth },
      { name: 'hair_bravo_east', path: BravoEast },
      { name: 'hair_bravo_north', path: BravoNorth },
      { name: 'hair_bravo_south', path: BravoSouth },
      { name: 'hair_burgundy_east', path: BurgundyEast },
      { name: 'hair_burgundy_north', path: BurgundyNorth },
      { name: 'hair_burgundy_south', path: BurgundySouth },
      { name: 'hair_cleopatra_east', path: CleopatraEast },
      { name: 'hair_cleopatra_north', path: CleopatraNorth },
      { name: 'hair_cleopatra_south', path: CleopatraSouth },
      { name: 'hair_curly_east', path: CurlyEast },
      { name: 'hair_curly_north', path: CurlyNorth },
      { name: 'hair_curly_south', path: CurlySouth },
      { name: 'hair_cute_east', path: CuteEast },
      { name: 'hair_cute_north', path: CuteNorth },
      { name: 'hair_cute_south', path: CuteSouth },
      { name: 'hair_decent_east', path: DecentEast },
      { name: 'hair_decent_north', path: DecentNorth },
      { name: 'hair_decent_south', path: DecentSouth },
      { name: 'hair_elder_east', path: ElderEast },
      { name: 'hair_elder_north', path: ElderNorth },
      { name: 'hair_elder_south', path: ElderSouth },
      { name: 'hair_fancybun_east', path: FancybunEast },
      { name: 'hair_fancybun_north', path: FancybunNorth },
      { name: 'hair_fancybun_south', path: FancybunSouth },
      { name: 'hair_firestarter_east', path: FirestarterEast },
      { name: 'hair_firestarter_north', path: FirestarterNorth },
      { name: 'hair_firestarter_south', path: FirestarterSouth },
      { name: 'hair_flowy_east', path: FlowyEast },
      { name: 'hair_flowy_north', path: FlowyNorth },
      { name: 'hair_flowy_south', path: FlowySouth },
      { name: 'hair_fringe_east', path: FringeEast },
      { name: 'hair_fringe_north', path: FringeNorth },
      { name: 'hair_fringe_south', path: FringeSouth },
      { name: 'hair_frozen_east', path: FrozenEast },
      { name: 'hair_frozen_north', path: FrozenNorth },
      { name: 'hair_frozen_south', path: FrozenSouth },
      { name: 'hair_gaston_east', path: GastonEast },
      { name: 'hair_gaston_north', path: GastonNorth },
      { name: 'hair_gaston_south', path: GastonSouth },
      { name: 'hair_greasyswoop_east', path: GreasySwoopEast },
      { name: 'hair_greasyswoop_north', path: GreasySwoopNorth },
      { name: 'hair_greasyswoop_south', path: GreasySwoopSouth },
      { name: 'hair_junkie_east', path: JunkieEast },
      { name: 'hair_junkie_north', path: JunkieNorth },
      { name: 'hair_junkie_south', path: JunkieSouth },
      { name: 'hair_keeper_east', path: KeeperEast },
      { name: 'hair_keeper_north', path: KeeperNorth },
      { name: 'hair_keeper_south', path: KeeperSouth },
      { name: 'hair_lackland_east', path: LacklandEast },
      { name: 'hair_lackland_north', path: LacklandNorth },
      { name: 'hair_lackland_south', path: LacklandSouth },
      { name: 'hair_locks_east', path: LocksEast },
      { name: 'hair_locks_north', path: LocksNorth },
      { name: 'hair_locks_south', path: LocksSouth },
      { name: 'hair_long_east', path: LongEast },
      { name: 'hair_long_north', path: LongNorth },
      { name: 'hair_long_south', path: LongSouth },
      { name: 'hair_mess_east', path: MessEast },
      { name: 'hair_mess_north', path: MessNorth },
      { name: 'hair_mess_south', path: MessSouth },
      { name: 'hair_mohawk_east', path: MohawkEast },
      { name: 'hair_mohawk_north', path: MohawkNorth },
      { name: 'hair_mohawk_south', path: MohawkSouth },
      { name: 'hair_mop_east', path: MopEast },
      { name: 'hair_mop_north', path: MopNorth },
      { name: 'hair_mop_south', path: MopSouth },
      { name: 'hair_pigtails_east', path: PigtailsEast },
      { name: 'hair_pigtails_north', path: PigtailsNorth },
      { name: 'hair_pigtails_south', path: PigtailsSouth },
      { name: 'hair_ponytails_east', path: PonytailsEast },
      { name: 'hair_ponytails_north', path: PonytailsNorth },
      { name: 'hair_ponytails_south', path: PonytailsSouth },
      { name: 'hair_primal_east', path: PrimalEast },
      { name: 'hair_primal_north', path: PrimalNorth },
      { name: 'hair_primal_south', path: PrimalSouth },
      { name: 'hair_princess_east', path: PrincessEast },
      { name: 'hair_princess_north', path: PrincessNorth },
      { name: 'hair_princess_south', path: PrincessSouth },
      { name: 'hair_randy_east', path: RandyEast },
      { name: 'hair_randy_north', path: RandyNorth },
      { name: 'hair_randy_south', path: RandySouth },
      { name: 'hair_recruit_east', path: RecruitEast },
      { name: 'hair_recruit_north', path: RecruitNorth },
      { name: 'hair_recruit_south', path: RecruitSouth },
      { name: 'hair_revolt_east', path: RevoltEast },
      { name: 'hair_revolt_north', path: RevoltNorth },
      { name: 'hair_revolt_south', path: RevoltSouth },
      { name: 'hair_rockstar_east', path: RockstarEast },
      { name: 'hair_rockstar_north', path: RockstarNorth },
      { name: 'hair_rockstar_south', path: RockstarSouth },
      { name: 'hair_rookie_east', path: RookieEast },
      { name: 'hair_rookie_north', path: RookieNorth },
      { name: 'hair_rookie_south', path: RookieSouth },
      { name: 'hair_savage_east', path: SavageEast },
      { name: 'hair_savage_north', path: SavageNorth },
      { name: 'hair_savage_south', path: SavageSouth },
      { name: 'hair_scat_east', path: ScatEast },
      { name: 'hair_scat_north', path: ScatNorth },
      { name: 'hair_scat_south', path: ScatSouth },
      { name: 'hair_scorpiontail_east', path: ScorpiontailEast },
      { name: 'hair_scorpiontail_north', path: ScorpiontailNorth },
      { name: 'hair_scorpiontail_south', path: ScorpiontailSouth },
      { name: 'hair_scrapper_east', path: ScrapperEast },
      { name: 'hair_scrapper_north', path: ScrapperNorth },
      { name: 'hair_scrapper_south', path: ScrapperSouth },
      { name: 'hair_senorita_east', path: SenoritaEast },
      { name: 'hair_senorita_north', path: SenoritaNorth },
      { name: 'hair_senorita_south', path: SenoritaSouth },
      { name: 'hair_shaved_east', path: ShavedEast },
      { name: 'hair_shaved_north', path: ShavedNorth },
      { name: 'hair_shaved_south', path: ShavedSouth },
      { name: 'hair_shavetopbraid_east', path: ShaveTopBraidEast },
      { name: 'hair_shavetopbraid_north', path: ShaveTopBraidNorth },
      { name: 'hair_shavetopbraid_south', path: ShaveTopBraidSouth },
      { name: 'hair_snazzy_east', path: SnazzyEast },
      { name: 'hair_snazzy_north', path: SnazzyNorth },
      { name: 'hair_snazzy_south', path: SnazzySouth },
      { name: 'hair_spikes_east', path: SpikesEast },
      { name: 'hair_spikes_north', path: SpikesNorth },
      { name: 'hair_spikes_south', path: SpikesSouth },
      { name: 'hair_sticky_east', path: StickyEast },
      { name: 'hair_sticky_north', path: StickyNorth },
      { name: 'hair_sticky_south', path: StickySouth },
      { name: 'hair_topdog_east', path: TopdogEast },
      { name: 'hair_topdog_north', path: TopdogNorth },
      { name: 'hair_topdog_south', path: TopdogSouth },
      { name: 'hair_troubadour_east', path: TroubadourEast },
      { name: 'hair_troubadour_north', path: TroubadourNorth },
      { name: 'hair_troubadour_south', path: TroubadourSouth },
      { name: 'hair_tuft_east', path: TuftEast },
      { name: 'hair_tuft_north', path: TuftNorth },
      { name: 'hair_tuft_south', path: TuftSouth },
      { name: 'hair_warden_east', path: WardenEast },
      { name: 'hair_warden_north', path: WardenNorth },
      { name: 'hair_warden_south', path: WardenSouth },
      { name: 'hair_wavy_east', path: WavyEast },
      { name: 'hair_wavy_north', path: WavyNorth },
      { name: 'hair_wavy_south', path: WavySouth },
      
      // Apparel
      { name: 'apparel_shirt_basic_male_east', path: ShirtBasicMaleEast },
      { name: 'apparel_shirt_basic_male_north', path: ShirtBasicMaleNorth },
      { name: 'apparel_shirt_basic_male_south', path: ShirtBasicMaleSouth }
    ];

    const weaponAssets = [
      // Ranged weapons
      { name: 'weapon_assault_rifle', path: AssaultRifle },
      { name: 'weapon_autopistol', path: Autopistol },
      { name: 'weapon_revolver', path: Revolver },
      { name: 'weapon_shotgun', path: Shotgun },
      { name: 'weapon_sniper_rifle', path: SniperRifle },
      
      // Melee weapons
      { name: 'weapon_club', path: Club },
      { name: 'weapon_knife', path: Knife }
    ];

    const allAssets = [...buildingAssets, ...colonistAssets, ...weaponAssets];
    let loadedCount = 0;
    const total = allAssets.length;
    const report = (name: string, status: 'loaded' | 'failed') => {
      loadedCount += 1;
      onProgress?.({ loaded: loadedCount, total, name, status });
    };

    const loadPromises = allAssets.map(asset =>
      this.loadImage(asset.name, asset.path)
        .then(() => report(asset.name, 'loaded'))
        .catch((error) => {
          report(asset.name, 'failed');
          throw error;
        })
    );
    
    const results = await Promise.allSettled(loadPromises);
    const failed = results.some(result => result.status === 'rejected');
    if (failed) {
      console.warn('Some assets failed to load, continuing with fallbacks');
    }
    this.loaded = true; // Still mark as loaded to prevent blocking
  }

  private loadImage(name: string, path: string): Promise<void> {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.onload = () => {
        this.images.set(name, img);
        console.log(`Loaded image: ${name}`);
        resolve();
      };
      img.onerror = () => {
        console.warn(`Failed to load image: ${name} from ${path}`);
        reject(new Error(`Failed to load ${name}`));
      };
      img.src = path;
    });
  }

  getImage(name: string): HTMLImageElement | null {
    return this.images.get(name) || null;
  }

  // Helper method to get colonist sprite components
  getColonistSprite(component: string, variant: string, direction: string): HTMLImageElement | null {
    const spriteName = `${component}_${variant}_${direction}`;
    return this.images.get(spriteName) || null;
  }

  // Get all available hair styles (only the ones we've imported so far)
  getAvailableHairStyles(): string[] {
    return ['afro', 'bob', 'bowlcut', 'braidbun', 'bravo', 'burgundy', 'cleopatra', 
            'curly', 'cute', 'decent', 'elder', 'fancybun', 'firestarter', 'flowy', 'fringe',
            'frozen', 'gaston', 'greasyswoop', 'junkie', 'keeper', 'lackland', 'locks', 'long',
            'mess', 'mohawk', 'mop', 'pigtails', 'ponytails', 'primal', 'princess', 'randy',
            'recruit', 'revolt', 'rockstar', 'rookie', 'savage', 'scat', 'scorpiontail', 'scrapper',
            'senorita', 'shaved', 'shavetopbraid', 'snazzy', 'spikes', 'sticky', 'topdog',
            'troubadour', 'tuft', 'warden', 'wavy'];
  }

  // Get all available head types
  getAvailableHeadTypes(): string[] {
    return ['male_average_normal'];
  }

  // Get all available body types
  getAvailableBodyTypes(): string[] {
    return ['naked_male'];
  }

  // Get all available apparel types
  getAvailableApparelTypes(): string[] {
    return ['shirt_basic_male'];
  }

  // Get weapon image by defName (matches itemDatabase defName format)
  getWeaponImage(defName: string): HTMLImageElement | null {
    // Map defName to asset name
    const weaponMap: Record<string, string> = {
      // Ranged weapons
      'Autopistol': 'weapon_autopistol',
      'AssaultRifle': 'weapon_assault_rifle',
      'SniperRifle': 'weapon_sniper_rifle',
      'SMG': 'weapon_autopistol',              // SMG uses Autopistol sprite (smaller weapon)
      'Revolver': 'weapon_revolver',
      'Shotgun': 'weapon_shotgun',
      
      // Melee weapons
      'Club': 'weapon_club',
      'Knife': 'weapon_knife'
    };
    
    const assetName = weaponMap[defName];
    return assetName ? this.images.get(assetName) || null : null;
  }

  isLoaded(): boolean {
    return this.loaded;
  }
}
